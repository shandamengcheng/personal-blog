# CSS层叠和继承
## 为什么需要层叠机制
  CSS的本质是声明样式规则，当在一个元素上应用多个样式时，可能会发生样式规则的冲突。层叠就是解决冲突的一系列规则。
## 层叠机制
> **层叠的本质是给不同的规则设置不同的重要程度以确定规则使用的优先级。**
### 解决样式冲突的依赖条件
- 样式表的来源
  - 创作人员样式表
  - 用户样式表
  - 用户代理
- 选择器优先级
  - 对应四个级别， 即a、b、c、d:
  - 内联样式级别最高，a为1
  - b为ID选择器的数目
  - c为类选择器 && 伪类选择器 && 属性选择器的数量
  - d为元素选择器 && 伪元素选择器的数量
  - 通配符、组合器(+, ~, >等)以及否定伪类:not()(**但是，在:not()内部声明的样式可以**)对优先级没有影响
  - 通配符(*)的优先级为0,0,0,0。继承不存在优先级。因此，通配符设置的样式的优先级大于元素继承的样式的优先级。
- 源码顺序
  - 当来源、优先级相同时，源码中位置靠后的规则被应用。
### !important规则
  在CSS中，可以通过在声明后面分号前加上!important来表示声明的重要性。!important对样式的优先级没有影响，但是会与普通的声明区分开来。其实，所有使用!important的声明都会放在一起，然后优先级关系就在这个范围内解决。同样，非重要（非!important）的声明也会放在一起，其中的冲突也是使用优先级关系解决。
```
p {
  font-size: 1.5em !important;
  color: red !important;
}
```
**注意：允许使用!important来覆盖规则**
#### !important的使用原则（一个总是，一个仅仅，两个绝不）
- 在使用!important之前，总是寻找使用优先级的方式
- 仅在用于覆盖外部CSS(来自外部库，如Bootstrap或normalize.css)的页面特定的CSS中使用!important
- 在编写插件或混搭程序时，绝不使用!important
- 绝不在网站范围内使用!important

#### 相对于使用!important,考虑：
1. 更好地利用CSS级联
2. 使用更具体的规则。通过在要选择的元素前指示一个或多个元素，规则将变得更加具体并获得更高的优先级：
```
<div id="test">
  <span>Text</span>
</div>
```

```
div#test span { color: green; }
div span { color: blue; }
span { color: red; }
```
通过上面的规则，文本颜色会变成绿色，因为第一个规则是更具体的。
3. 当没有更多选择器可以指定的话，可以通过重复简单的选择器来增加优先级
```
#myId#myId span { color: yellow; }
.myClass.myClass span { color: orange; }
```

#### !important的使用情况
1. 覆盖行内样式
### CSS层叠机制的完整过程：
1. 找到匹配相应元素的所有规则
2. 