### 语义化版本

#### 版本
版本是一种被描述为"v2.0.0"的形式，前面的'=' 或 'v'会被省略，表示为版本2.0.0

#### 范围(Ranges)
版本范围(version range)是一组***比较器***(comparator)，指定满足该范围的版本。

**比较器**由一个操作符和一个版本号组成。原始的操作符有：
- < : 小于
- <= : 小于等于
- \> : 大于
- \>= : 大于等于
- = : 等于。 <font style="font-weight: bold">如果没有指定操作符，则假定相等性。因此这个操作符是可选的，但可能包含在内</font>

> **例子：** 

> 比较器 >=1.2.7 会匹配版本1.2.7, 1.2.8, 2.5.3, 1.3.9等，但是不会匹配版本1.2.6, 1.1.0等。

> =v1.2.2等同于v1.2.2, 只会匹配版本1.2.2

比较器也可以通过**空格**分隔形成一个*比较器集*（comparator set），它的范围是其包含的所有的比较器的范围**交集**。

<font color="orange">一个范围(range)由一个或多个以 || 分隔的比较器集(comparator sets)组成。</font>当且仅当由||分隔的比较器集中存在至少一个比较器集中的每个比较器都匹配该版本时，才能说，这个版本匹配这个范围。(简而言之，||类似于逻辑运算符中的或，一个版本如果要匹配这个范围，需要匹配其中至少一个比较器集)。
> 例子：

> 范围 >=1.2.7 <1.3.0会匹配版本1.2.7, 1.2.8, 1.2.99,但是不会匹配版本1.2.6, 1.3.0, 1.1.0等。

> 范围1.2.7 || >=1.2.9 <2.0.0会匹配版本1.2.7, 1.2.9, 1.4.5等，但是不会匹配版本1.2.8, 2.0.0等

#### 单词解释
- major 主版本号
- minor 次版本号
- patch 修订号

#### 预发行标签(Prerelease Tags)
如果一个版本有预发行标签，比如1.2.3-alpha.3, 那么它仅被允许匹配这样的比较器集： 至少有一个同样[major, minor, patch]结构的且<font color="orange">***同样也有一个预发行标签***</font>的比较器。

> 例子：

> 范围>1.2.3-alpha.3允许匹配版本1.2.3-alpha.7, 但是不会匹配 3.4.5-alpha.9, 尽管从之前的排序规则上来说，3.4.5-alpha.9确实  ***"大于"*** 1.2.3-alpha.7。

> 这个范围仅接受在版本1.2.3上的预发行标签。也就是说，**如果要匹配这个集合的版本有预发行标签，那么这个版本只能是在1.2.3版本上的预发行标签。** 如果一个版本没有预发行标签，比如，3.4.5, 那么这个版本是匹配>1.2.3-alpha.3这个范围的。因为它没有预发行标签，且比1.2.3-alpha.7大。

这种行为的原因主要有两个方面，一是，预发行标签通常更新地非常快并且包含许多破坏性变更(breaking changes)，而且这些变更可能不适合大部分人消费。因此，默认情况下，它们被排除在范围匹配语义之外。其次，使用预发行版本的用户清晰地表达使用特定***alpha/beta/rc***版本的意图。在范围内包含一个预发行版本，表明了用户知晓所带来的风险。然而，假设他们选择在下一组预发行版本上采取类似的风险仍然是不合适的。

#### 高级范围语法
1. -范围 X.Y.Z - A.B.C
- 1.2.3 - 2.3.4  :=  >=1.2.3 <=2.3.4

如果将不完整的版本作为范围的第一个版本提供，那么，缺失的部分将被零值替换
- 1.2 - 2.3.4  :=  >=1.2.0 <=2.3.4

如果不完整的版本作为范围的第二个版本提供，那么，所有以元组[major, minor, patch]中提供的部分开始的版本都可以匹配，但是不会比元组提供的部分大。
- 1.2.3 - 2.3  :=  >=1.2.3 <2.4.0-0
- 1.2.3 - 2 :=  >=1.2.3 < 3.0.0-0

2. X范围 1.2.X  1.X  1.2.*  *
任何X，x或*,用于“表示”元组[major, minor, patch]中的数值之一。
- * := >=0.0.0
- 1.x := >=1.0.0 <2.0.0-0(匹配主版本号)
- 1.2.x := >=1.2.0 <1.3.0-0(匹配主版本号，次版本号)

不完整的版本范围被当作一个x-range处理，因此，下面的特殊符号实际是可选的。
- ""(空字符串) := * := >=0.0.0
- 1 := 1.x.x := >=1.0.0 <2.0.0-0
- 1.2 := 1.2.x := >=1.2.0  <1.3.0-0

3. ~范围 ～1.2.3 ～1.2 ～1
如果比较器的次版本号是确定的，那么，允许修订号层级的改变。如果不是，允许次版本号层级的改变。
- ~1.2.3 := >=1.2.3 <1.(2+1).0 := >=1.2.3 <1.3.0-0
- ~1.2 := >=1.2.0 <1.(2+1).0 := >=1.2.0 <1.3.0-0 (Same as 1.2.x)
- ~1 := >=1.0.0 <(1+1).0.0 := >=1.0.0 <2.0.0-0 (Same as 1.x)
- ~0.2.3 := >=0.2.3 <0.(2+1).0 := >=0.2.3 <0.3.0-0
- ~0 := >=0.0.0 <(0+1).0.0 := >=0.0.0 <1.0.0-0 (Same as 0.x)
- ~1.2.3-beta.2 := >=1.2.3-beta.2 <1.3.0-0

4. ^范围 ^1.2.3 ^0.2.5 ^0.0.4
允许不改变元组[major, minor, patch]最左侧非零值元素。比如说，允许修改版本1.0.0的patch和minor部分，版本0.X >= 0.1.0的patch部分，不能修改版本0.0.x的任何部分。
- ^1.2.3 := >=1.2.3 <2.0.0-0
- ^0.2.3 := >=0.2.3 <0.3.0-0
- ^0.0.3 := >=0.0.3 <0.0.4-
- ^1.2.3-beta.2 := >=1.2.3-beta.2 <2.0.0-0
- ^0.0.3-beta := >=0.0.3-beta <0.0.4-0

如果^范围版本缺少patch，缺少的会置为0，但是如果major和minor都是0的话，允许patch可以变化。
- ^1.2.x := >=1.2.0 <2.0.0-0
- ^0.0.x := >=0.0.0 <0.1.0-0
- ^0.0 := >=0.0.0 <0.1.0-0

如果^范围版本缺少minor和patch会置为0，但是如果major是0的话，允许minor, patch变化
- ^1.x := >=1.0.0 <2.0.0-0
- ^0.x := >=0.0.0 <1.0.0-0